# 6材料库

## 文件结构

| ClkData |                              |
| ------- | ---------------------------- |
|         | ClMasterDset                 |
|         | ClHcDset                     |
|         | clPhbLb                      |
|         | clRcjLb                      |
|         | ClScLbDset（特殊需求才会用） |
|         | ClMlDset(目录)               |

## 表结构

* ClMlDset

  | level | guid     | id           | MlMc     | MlZcSm |
  | ----- | -------- | ------------ | -------- | ------ |
  | 层级  | 自动生成 | 序号（唯一） | 目录名称 |        |

* ClMasterDset

  人工，材料，主材***都不是可分解材料***，因此没有材料构成。

  材料与目录的关系是在这张表中显示的。

  这个表中包含了所有的材料。其中有的材料是由其他材料组成的，材料之间的关系在ClHcDset这张表中。

  | id         | ClBm     | ClMc     | ClDw     | ClDej      | ClLb     | MlId   |
  | ---------- | -------- | -------- | -------- | ---------- | -------- | ------ |
  | 序号(唯一) | 材料编码 | 材料名称 | 材料单位 | 材料定额价 | 材料类别 | 目录id |

* ClMlDset 和 ClMasterDset 这两个表是通过 id 和 Mlid 来关联的。

* ClHcDset

  | zid                | cid              | Hl     |
  | ------------------ | ---------------- | ------ |
  | 可分解材料的id字段 | 分解材料的id字段 | 消耗量 |

* clRcjLb

  | RcjLx                                | RcjMc                    |
  | ------------------------------------ | ------------------------ |
  | 数字(1：1人工，7：7材料，15：15机械) | 1人工，7材料，15机械等等 |

# 定额库（有点复杂）

* 定额库对应的清单库，定额库对应的材料库在这个库中有保存

## 文件结构

| DekData |                | DataContext                            |
| ------- | -------------- | -------------------------------------- |
|         | deklb          | 这张表类似于xmjg表                     |
|         | DeMlDset       | 这张表包含了所有专业的目录             |
|         | DePathRelation | 这张表中包含了清单库和材料库之间的关系 |
|         | QdZyDset       |                                        |
|         | DeGlMl         |                                        |
|         | DeGlLx         |                                        |
|         | DeGlLxDetail   |                                        |
|         | CGJXF          |                                        |
|         | CGJXFLB        |                                        |
|         | AZGCGMain      |                                        |
|         | AZGCFDetail    |                                        |
|         | AZGCFDetailCg  |                                        |
|         | clsjhs         |                                        |

## 表结构

* deklb

  | zyid   | zymc     | dm               | dekmc      | guid | clkfilename        | modid | dmen             | infos |
  | ------ | -------- | ---------------- | ---------- | ---- | ------------------ | ----- | ---------------- | ----- |
  | 专业id | 专业名称 | 专业代码（汉字） | 定额库名称 |      | 该定额对应的材料库 |       | 英文代码（常用） |       |

* DeMlDset

  定额目录专业和表 deklb 表中 zyid 相对应。

  | level    | Id   | DeMuLuBianMa | DeMuLuMingCheng | DeMuluZhangCeShuoMing | DeMuluZhuanYe |
  | -------- | ---- | ------------ | --------------- | --------------------- | ------------- |
  | 层级关系 | id   | 定额目录编码 | 定额目录名称    | 定额目录章侧说明      | 定额目录专业  |

* DeMasterDset

  定额基价，有的地区成为“预算价格”或“单位价值”，它是指定额项目的单位综合价格，包括完成定额项目每单位产品所需耗费的人工费，材料费和机械费等，可以按照计算公式：基价（预算价格）=人工费 + 材料费 + 机械费 + 其他费用

  | id   | DeBianMa | DeMingCheng | DeDanwei | DeTeXiang | DeJiJia  | DeRengong  |
  | ---- | -------- | ----------- | -------- | --------- | -------- | ---------- |
  | id   | 定额编码 | 定额名称    | 定额单位 | 定额特项  | 定额基价 | 定额人工费 |

  | DeCailiao  | DeJiXie    | DeQiTa     | DeZuCai  | DeSheBei | DeLeiBie | DeZhuanYe |
  | ---------- | ---------- | ---------- | -------- | -------- | -------- | --------- |
  | 定额材料费 | 定额机械费 | 定额其他费 | 定额组材 | 定额设备 | 定额类别 | 定额专业  |

  | DeCehao  | DeXuhao  | DeGongZuoNeiRong | MlId   | debmqz       |      |      |
  | -------- | -------- | ---------------- | ------ | ------------ | ---- | ---- |
  | 定额册号 | 定额序号 | 定额工作内容     | 目录id | 定额编码前缀 |      |      |

* DeDetaiDset

  这张表中保存了定额和材料的关系。

  | DeId   | ClId   | XHL    |
  | ------ | ------ | ------ |
  | 定额id | 材料id | 消耗量 |

# 清单库

## 文件结构

清单分组和清单目录的关系：清单目录就类似于一本书的目录，清单分组类别相当于这本书的册号。清单库相当于一本很厚的书。这本书分为很多册，例如陆小凤传奇，分为陆小凤传奇一，陆小凤传奇二，陆小凤传奇三等等，而每一本书又有自己的目录。

| QdkData |              |                            |
| ------- | ------------ | -------------------------- |
|         | QdFzLb       | 清单分组类别               |
|         | QdMlDset     | 清单目录                   |
|         | QdMasterDset | 这个表中包含了所有的额清单 |
|         | QdGcNrDset   |                            |
|         | QdXmTzDset   |                            |

